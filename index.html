<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DGA Loon & Dividend Vergelijking</title>
<style>
  body { font-family: Arial, sans-serif; background: #fcfcf9; color: #254751; max-width: 1100px; margin: 0 auto 2rem auto; padding: 0 0.5em;}
  h1,h2 { color: #1e5d63; margin-top: 1.1rem;}
  label { font-weight: 600;}
  .card { background: #fff; box-shadow: 0 2px 10px #0001; border-radius: 8px; padding:1em 1.5em; margin-bottom:1.5em;}
  input[type=number] { width:100%; padding:6px; font-size:1em; border-radius:4px; border:1px solid #ccd;}
  .flex-row { display: flex; gap:1em; flex-wrap: wrap;}
  .flex-item { flex:1 1 220px; min-width:150px;}
  .compare-table th,.compare-table td{ border:1px solid #ddd; padding:0.4em 1em; text-align: right;}
  .compare-table th { background:#e7f2f2; color: #1e5d63;}
  .compare-table td.label{ text-align:left; font-weight:bold; color:#135;}
  .compare-table { border-collapse:collapse; width:100%; margin-top:1em; background:#fff;}
  tr.current td { background:#f6faf6;}
  tr.optimaal td { background:#fcf8ef;}
  tr.verschil td { background:#DFF1FB; font-weight:bold;}
  .green {color: #239349;}
  .red   {color: #bb2727;}
</style>
</head>
<body>
<h1>DGA Netto Strategie Vergelijking</h1>
<p>Vergelijk <b>netto uitkering en belastingdruk</b> tussen de huidige situatie en de fiscaal optimale DGA-structuur.</p>

<div class="card">
  <h2>Invoer</h2>
  <div class="flex-row">
    <div class="flex-item">
      <label for="huidigBrutoLoon">Bruto maandsalaris nu (€):</label>
      <input type="number" id="huidigBrutoLoon" value="6000" min="0" step="100">
    </div>
    <div class="flex-item">
      <label for="vakantiegeld">Vakantiegeld per jaar (€):</label>
      <input type="number" id="vakantiegeld" value="2800" min="0" step="100">
    </div>
    <div class="flex-item">
      <label for="nettoWens">Gewenst netto per maand (€):</label>
      <input type="number" id="nettoWens" value="4000" min="0" step="50">
    </div>
  </div>
  <div class="flex-row">
    <div class="flex-item">
      <label for="gebruikelijkLoon">Fiscaal minimum gebruikelijk loon per jaar (€):</label>
      <input type="number" id="gebruikelijkLoon" value="56000" min="35000" step="1000">
    </div>
  </div>
</div>

<div class="card">
  <h2>Vergelijkingstabel: Huidig vs. Optimaal</h2>
  <table class="compare-table" id="resultaatTable">
    <thead>
      <tr>
        <th>Omschrijving</th>
        <th>Jaar 1: Huidig</th>
        <th>Jaar 2: Optimaal</th>
        <th>Verschil</th>
      </tr>
    </thead>
    <tbody id="tableBody">
      <!-- Dynamisch gegenereerde regels -->
    </tbody>
  </table>
</div>

<script>
const box1_tarief = 0.3697;
const box2_tarief = 0.269;

const formatEuro = val => val.toLocaleString('nl-NL', { style: 'currency', currency: 'EUR', minimumFractionDigits: 2 });

function bereken() {
  // Invoer
  let brutoMaand = parseFloat(document.getElementById('huidigBrutoLoon').value);
  let vakantiegeld = parseFloat(document.getElementById('vakantiegeld').value) || 0;
  let nettoWens = parseFloat(document.getElementById('nettoWens').value) || 0;
  let gebruikelijkLoon = parseFloat(document.getElementById('gebruikelijkLoon').value);

  // === Huidig ===
  let brutoJaarLoon_huidig = brutoMaand*12;
  let nettoMaand_huidig = brutoMaand*(1-box1_tarief) + (vakantiegeld*0.8/12);
  let nettoJaar_huidig = nettoMaand_huidig*12;

  // === Optimaal (minimaal loon + dividend aanvullen tot netto wens) ===
  // 1. Gebruikelijk loon: bruto en netto
  let nettoMaand_loon_opt = (gebruikelijkLoon*(1-box1_tarief))/12;
  let nettoJaar_loon_opt = nettoMaand_loon_opt*12;

  // 2. Benodigd netto per jaar aanvullen tot nettoWens
  let nettoAanvul = Math.max(0, nettoWens - nettoMaand_loon_opt);
  let nettoAanvul_jaar = nettoAanvul*12;
  let brutoDividend_opt = Math.ceil(nettoAanvul_jaar/(1-box2_tarief));
  let nettoDividend_opt = brutoDividend_opt*(1-box2_tarief);

  // 3. Totaal uit de BV per jaar & maand in optimaal
  let totaalNettoJaar_opt = nettoJaar_loon_opt + nettoDividend_opt;
  let totaalNettoMaand_opt = totaalNettoJaar_opt/12;

  // 4. Verschil (netto meer over)
  let verschilNettoJaar = totaalNettoJaar_opt - nettoJaar_huidig;
  let verschilNettoMaand = verschilNettoJaar/12;

  // 5. Belastingdruk berekenen
  let belastingLoonHuidig = brutoJaarLoon_huidig - nettoMaand_huidig*12;
  let belastingLoonOpt = gebruikelijkLoon - nettoMaand_loon_opt*12;
  let belastingDividendOpt = brutoDividend_opt - nettoDividend_opt;
  let belastingTotaalOpt = belastingLoonOpt + belastingDividendOpt;

  // === Tabel vullen ===
  let tb = document.getElementById('tableBody');
  tb.innerHTML = `
    <tr class="current"><td class='label'>Bruto jaarsalaris</td><td>${formatEuro(brutoJaarLoon_huidig)}</td><td>${formatEuro(gebruikelijkLoon)}</td><td>${formatEuro(gebruikelijkLoon-brutoJaarLoon_huidig)}</td></tr>
    <tr class="current"><td class='label'>Bruto maandsalaris</td><td>${formatEuro(brutoMaand)}</td><td>${formatEuro(gebruikelijkLoon/12)}</td><td>${formatEuro(gebruikelijkLoon/12-brutoMaand)}</td></tr>
    <tr class="current"><td class='label'>Netto maandsalaris</td><td>${formatEuro(nettoMaand_huidig)}</td><td>${formatEuro(nettoMaand_loon_opt)}</td><td>${formatEuro(nettoMaand_loon_opt-nettoMaand_huidig)}</td></tr>
    <tr class="current"><td class='label'>Netto jaarsalaris</td><td>${formatEuro(nettoJaar_huidig)}</td><td>${formatEuro(nettoJaar_loon_opt)}</td><td>${formatEuro(nettoJaar_loon_opt-nettoJaar_huidig)}</td></tr>
    <tr class="optimaal"><td class='label'>Benodigde bruto dividend</td><td>—</td><td>${formatEuro(brutoDividend_opt)}</td><td>&nbsp;</td></tr>
    <tr class="optimaal"><td class='label'>Benodigde netto dividend</td><td>—</td><td>${formatEuro(nettoDividend_opt)}</td><td>&nbsp;</td></tr>
    <tr class="optimaal"><td class='label'>Totaal netto uit BV per maand</td><td>${formatEuro(nettoMaand_huidig)}</td><td>${formatEuro(totaalNettoMaand_opt)}</td><td class="${(verschilNettoMaand>0?'green':'red')}">${formatEuro(verschilNettoMaand)}</td></tr>
    <tr class="optimaal"><td class='label'>Totaal netto uit BV per jaar</td><td>${formatEuro(nettoJaar_huidig)}</td><td>${formatEuro(totaalNettoJaar_opt)}</td><td class="${(verschilNettoJaar>0?'green':'red')}">${formatEuro(verschilNettoJaar)}</td></tr>
    <tr class="optimaal"><td class='label'>Totaal belastingdruk (loon+dividend)<br><span style="font-weight:normal;font-size:.94em;">(box 1 en 2 samen)</span></td>
      <td>${formatEuro(belastingLoonHuidig)}</td>
      <td>${formatEuro(belastingTotaalOpt)}</td>
      <td>${formatEuro(belastingTotaalOpt-belastingLoonHuidig)}</td></tr>`;
}

document.querySelectorAll('input[type=number]').forEach(inp=>inp.addEventListener('input',bereken));
window.onload = bereken;
</script>
</body>
</html>
