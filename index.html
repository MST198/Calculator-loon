<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DGA Netto Loon & Dividend Optimalisatie Met Overzicht</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 1100px; margin: 1rem auto; background: #fcfcf9; color: #254751; padding: 1rem 1.25rem;}
  h1, h2 { color: #215d63; margin-bottom: 0.5rem;}
  label { font-weight: bold; display: block; margin: 0.5rem 0 0.3rem 0;}
  input[type=number] { width: 100%; padding: 0.4rem; font-size: 1rem; border-radius: 4px; border: 1px solid #ccd; box-sizing: border-box;}
  .flex-row { display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 1.5rem;}
  .flex-item { flex: 1 1 220px; min-width: 180px; }
  .card { background: #fff; padding: 1rem 1.5rem; border-radius: 10px; box-shadow: 0 2px 12px rgb(0 0 0 / 0.1); margin-bottom: 1.5rem;}
  .overview-section { display: flex; gap: 2rem; flex-wrap: wrap; margin-bottom: 1.5rem;}
  .info-box {
    flex: 1 1 320px;
    background: #e6f7f9;
    border-left: 7px solid #2497a6;
    border-radius: 5px;
    padding: 1rem 1.2rem;
    color: #11636c;
    font-weight: 600;
  }
  .info-box.red { background: #fbe2e1; border-left-color: #d04e49; color: #9e2b2a;}
  .info-box.green { background: #e3f6e7; border-left-color: #2b8242; color: #1e5b21;}
  .info-box .label-small { font-weight: normal; font-size: 0.90rem; opacity: 0.7; margin-top: 0.35rem;}
  table { width: 100%; border-collapse: collapse; margin-top: 1rem; font-size: 0.9rem;}
  th, td { border: 1px solid #ddd; padding: 0.5rem 1rem; text-align: right;}
  th { background-color: #d3ebee; color: #1c5e66;}
  td.label {text-align: left; font-weight: 600;}
  canvas { max-width: 100%; margin: 1.5rem 0;}
  .footer { text-align: center; margin-top: 3rem; color: #777; font-size: 0.85rem;}
</style>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<h1>DGA Netto Loon & Dividend Optimalisatie</h1>

<div class="card">
  <h2>Stap 1: Voer je gegevens in</h2>
  <div class="flex-row">
    <div class="flex-item">
      <label for="brutoSalaris">Bruto maandsalaris dit jaar (€):</label>
      <input type="number" id="brutoSalaris" value="6000" min="0" step="50" />
    </div>
    <div class="flex-item">
      <label for="vakantiegeld">Vakantiegeld per jaar (€):</label>
      <input type="number" id="vakantiegeld" value="2800" min="0" step="50" />
    </div>
    <div class="flex-item">
      <label for="nettoMaandWens">Gewenst netto privé per maand (€):</label>
      <input type="number" id="nettoMaandWens" value="4000" min="0" step="10" />
    </div>
    <div class="flex-item">
      <label for="minimumLoon">Fiscaal minimum gebruikelijk loon per jaar (€):</label>
      <input type="number" id="minimumLoon" value="56000" min="35000" max="76000" step="1000" />
      <span class="label-small">Minimaal loon verplicht door Belastingdienst</span>
    </div>
  </div>
</div>

<div class="overview-section">
  <div class="info-box">
    <div>■ Bruto maandloon (minimaal): <span id="infoBrutoMaand">-</span></div>
    <div>■ Maandelijks netto loon: <span id="infoNettoMaandLoon">-</span></div>
    <div>■ Maandelijks vakantiegeld netto (80%): <span id="infoVakantieNetto">-</span></div>
  </div>
  <div class="info-box green">
    <div>■ Benodigd bruto dividend per jaar: <span id="infoDivBrutoJaar">-</span></div>
    <div>■ Benodigd netto dividend per maand: <span id="infoDivNettoMaand">-</span></div>
  </div>
  <div class="info-box red" id="meldingDividend"></div>
</div>

<div class="card">
  <h2>Stap 2: Overzicht en vergelijkingstabel (3 jaar)</h2>
  <table>
    <thead>
      <tr>
        <th>Omschrijving</th>
        <th>Jaar 1: Huidige situatie</th>
        <th>Jaar 2: Geoptimaliseerd</th>
        <th>Jaar 3: Geoptimaliseerd</th>
        <th>Verschil jaar 2 t.o.v. jaar 1</th>
        <th>Totaal netto privé per maand</th>
      </tr>
    </thead>
    <tbody id="vergelijkingBody"></tbody>
  </table>
</div>

<div class="card">
  <h2>Stap 3: Visuele vergelijking</h2>
  <canvas id="barChart"></canvas>
  <canvas id="nettoMaandChart"></canvas>
  <canvas id="belastingChart"></canvas>
  <canvas id="cumChart"></canvas>
</div>

<script>
// Tarieven 2025
const box1Tarief = 0.3697;
const box2Tarief = 0.269;

const brutoSalarisInput = document.getElementById('brutoSalaris');
const vakantiegeldInput = document.getElementById('vakantiegeld');
const nettoMaandWensInput = document.getElementById('nettoMaandWens');
const minimumLoonInput = document.getElementById('minimumLoon');
const meldingDividendEl = document.getElementById('meldingDividend');

const infoBrutoMaand = document.getElementById('infoBrutoMaand');
const infoNettoMaandLoon = document.getElementById('infoNettoMaandLoon');
const infoVakantieNetto = document.getElementById('infoVakantieNetto');
const infoDivBrutoJaar = document.getElementById('infoDivBrutoJaar');
const infoDivNettoMaand = document.getElementById('infoDivNettoMaand');

let barChart, nettoMaandChart, belastingChart, cumChart;

function formatEuro(val){
  return val.toLocaleString('nl-NL', {style:'currency', currency:'EUR', minimumFractionDigits:2});
}

function berekenNettoVanBruto(bruto){
  return bruto * (1 - box1Tarief);
}

function bereken() {
  // Invoerwaarden
  let brutoMaandHuidig = parseFloat(brutoSalarisInput.value) || 0;
  let vakantiegeld = parseFloat(vakantiegeldInput.value) || 0;
  let nettoWensMaand = parseFloat(nettoMaandWensInput.value) || 0;
  let minimumLoonJaar = parseFloat(minimumLoonInput.value) || 56000;

  // Jaar 1 huidig loon en vakantiegeld
  let brutoJaarHuidig = brutoMaandHuidig * 12;
  let nettoMaandHuidig = brutoMaandHuidig * (1 - box1Tarief) + (vakantiegeld * 0.8 / 12);
  let nettoJaarHuidig = nettoMaandHuidig * 12;

  // Update overzichten
  infoBrutoMaand.textContent = formatEuro(brutoMaandHuidig);
  infoNettoMaandLoon.textContent = formatEuro(brutoMaandHuidig * (1 - box1Tarief));
  infoVakantieNetto.textContent = formatEuro(vakantiegeld * 0.8 / 12);

  // Melding dividend verplicht of niet
  if (nettoWensMaand <= berekenNettoVanBruto(minimumLoonJaar) / 12) {
    meldingDividendEl.textContent = "Dividenduitkering is (nog) niet nodig, netto maandwens valt binnen fiscaal minimum loon.";
  } else {
    meldingDividendEl.textContent = "Let op: netto maandwens is hoger dan fiscaal minimum loon, dividenduitkering wordt dan fiscaal interessant.";
  }

  // Geoptimaliseerd (minimum loon plus dividend aanvullen)
  let nettoMaandMinLoon = berekenNettoVanBruto(minimumLoonJaar) / 12;
  let nettoJaarMinLoon = nettoMaandMinLoon * 12;

  let nettoDividendPerJaar = Math.max(0, (nettoWensMaand - nettoMaandMinLoon) * 12);
  let brutoDividendPerJaar = nettoDividendPerJaar / (1 - box2Tarief);
  let nettoDividendPerMaand = nettoDividendPerJaar / 12;

  // Update dividend info
  infoDivBrutoJaar.textContent = formatEuro(brutoDividendPerJaar);
  infoDivNettoMaand.textContent = formatEuro(nettoDividendPerMaand);

  let totaalBrutoJaarOptimaal = minimumLoonJaar + brutoDividendPerJaar;
  let nettoJaarOptimaal = nettoJaarMinLoon + nettoDividendPerJaar;
  let brutoJaarOptimaal = totaalBrutoJaarOptimaal;

  let nettoMaandOptimaal = nettoJaarOptimaal / 12;
  let brutoMaandOptimaal = brutoJaarOptimaal / 12;

  // Belastingen berekening
  let belastingJaarHuidig = brutoJaarHuidig - nettoJaarHuidig;
  let belastingLoonOptimaal = minimumLoonJaar - nettoJaarMinLoon;
  let belastingDividendOptimaal = brutoDividendPerJaar - nettoDividendPerJaar;
  let belastingTotaalOptimaal = belastingLoonOptimaal + belastingDividendOptimaal;

  let verschilBrutoJaar = brutoJaarOptimaal - brutoJaarHuidig;
  let verschilNettoJaar = nettoJaarOptimaal - nettoJaarHuidig;

  // Invullen tabel
  const tbody = document.getElementById('vergelijkingBody');
  tbody.innerHTML = `
    <tr><td class="label">Bruto jaarsalaris</td><td>${formatEuro(brutoJaarHuidig)}</td><td>${formatEuro(minimumLoonJaar)}</td><td>${formatEuro(minimumLoonJaar)}</td><td>${formatEuro(minimumLoonJaar - brutoJaarHuidig)}</td><td>–</td></tr>
    <tr><td class="label">Bruto dividend (voorfinanciering netto gat)</td><td>–</td><td>${formatEuro(brutoDividendPerJaar)}</td><td>${formatEuro(brutoDividendPerJaar)}</td><td>–</td><td>–</td></tr>
    <tr><td class="label"><strong>Totaal uit de BV per jaar (bruto loon + dividend)</strong></td><td><strong>${formatEuro(brutoJaarHuidig)}</strong></td><td><strong>${formatEuro(brutoJaarOptimaal)}</strong></td><td><strong>${formatEuro(brutoJaarOptimaal)}</strong></td><td><strong>${formatEuro(verschilBrutoJaar)}</strong></td><td>–</td></tr>
    <tr><td class="label">Bruto maandsalaris</td><td>${formatEuro(brutoMaandHuidig)}</td><td>${formatEuro(brutoMaandOptimaal)}</td><td>${formatEuro(brutoMaandOptimaal)}</td><td>${formatEuro(brutoMaandOptimaal - brutoMaandHuidig)}</td><td>–</td></tr>
    <tr><td class="label">Netto maandsalaris (excl. vakantiegeld)</td><td>${formatEuro(brutoMaandHuidig * (1 - box1Tarief))}</td><td>${formatEuro(nettoMaandMinLoon)}</td><td>${formatEuro(nettoMaandMinLoon)}</td><td>${formatEuro(nettoMaandMinLoon - brutoMaandHuidig * (1 - box1Tarief))}</td><td>–</td></tr>
    <tr><td class="label">Netto vakantiegeld per maand</td><td>${formatEuro(vakantiegeld * 0.8 / 12)}</td><td>–</td><td>–</td><td>–</td><td>–</td></tr>
    <tr><td class="label">Netto jaarloon</td><td>${formatEuro(nettoJaarHuidig)}</td><td>${formatEuro(nettoJaarMinLoon)}</td><td>${formatEuro(nettoJaarMinLoon)}</td><td>${formatEuro(nettoJaarMinLoon - nettoJaarHuidig)}</td><td>–</td></tr>
    <tr><td class="label">Netto dividend</td><td>–</td><td>${formatEuro(nettoDividendPerJaar)}</td><td>${formatEuro(nettoDividendPerJaar)}</td><td>–</td><td>–</td></tr>
    <tr><td class="label"><strong>Totaal netto privé per jaar</strong></td><td><strong>${formatEuro(nettoJaarHuidig)}</strong></td><td><strong>${formatEuro(nettoJaarOptimaal)}</strong></td><td><strong>${formatEuro(nettoJaarOptimaal)}</strong></td><td><strong>${formatEuro(verschilNettoJaar)}</strong></td><td><strong>${formatEuro(nettoJaarOptimaal / 12)}</strong></td></tr>
  `;

  // Update grafieken
  updateCharts(brutoJaarHuidig, brutoJaarOptimaal, nettoMaandHuidig, nettoMaandMinLoon, nettoDividendPerMaand);
}

function updateCharts(brutoJaar1, brutoJaar2, nettoMaand1, nettoMaandLoonOptimaal, nettoDividendPerMaand){
  if (barChart) barChart.destroy();
  if (nettoMaandChart) nettoMaandChart.destroy();
  if (belastingChart) belastingChart.destroy();
  if (cumChart) cumChart.destroy();

  barChart = new Chart(document.getElementById('barChart').getContext('2d'), {
    type: 'bar',
    data: {
      labels: ['Huidig Jaar', 'Geoptimaliseerd'],
      datasets: [
        { label: 'Bruto uit BV per jaar', data: [brutoJaar1, brutoJaar2], backgroundColor: 'rgba(33,128,141,0.6)' },
        { label: 'Netto loon per maand', data: [nettoMaand1, nettoMaandLoonOptimaal], backgroundColor: 'rgba(230,129,97,0.6)' },
        { label: 'Netto dividend per maand', data: [0, nettoDividendPerMaand], backgroundColor: 'rgba(87,163,137,0.7)' }
      ]
    },
    options: {
      responsive: true,
      scales: {
        y: {
          beginAtZero: true,
          ticks: { callback: val => '€' + val.toLocaleString() }
        }
      },
      plugins: {
        legend: { position: 'top' },
        title: { display: false }
      }
    }
  });

  const maanden = ['Jan','Feb','Mrt','Apr','Mei','Jun','Jul','Aug','Sep','Okt','Nov','Dec'];
  const huidigNettoData = Array(12).fill(nettoMaand1);
  const optimaalNettoData = Array(11).fill(nettoMaandLoonOptimaal);
  optimaalNettoData.push(nettoMaandLoonOptimaal + nettoDividendPerMaand * 12);

  nettoMaandChart = new Chart(document.getElementById('nettoMaandChart').getContext('2d'), {
    type: 'line',
    data: {
      labels: maanden,
      datasets: [
        { label: 'Netto privé uitkering huidig', data: huidigNettoData, borderColor: 'rgba(33,128,141,1)', backgroundColor: 'rgba(33,128,141,0.25)', fill: true, tension: 0.3 },
        { label: 'Netto privé uitkering geoptimaliseerd', data: optimaalNettoData, borderColor: 'rgba(230,129,97,1)', backgroundColor: 'rgba(230,129,97,0.25)', fill: true, tension: 0.3 }
      ]
    },
    options: {
      responsive: true,
      scales: {
        y: {
          beginAtZero: false,
          ticks: { callback: val => '€' + val.toLocaleString() }
        }
      },
      plugins: {
        legend: { position: 'top' }
      }
    }
  });

  belastingChart = new Chart(document.getElementById('belastingChart').getContext('2d'), {
    type: 'bar',
    data: {
      labels: ['Box 1 loonbelasting', 'Box 2 dividendbelasting'],
      datasets: [{
        label: 'Belastingtarief (%)',
        data: [box1Tarief * 100, box2Tarief * 100],
        backgroundColor: ['rgba(33,128,141,0.6)', 'rgba(230,129,97,0.6)']
      }]
    },
    options: {
      indexAxis: 'y',
      plugins: { legend: { display: false } },
      scales: { x: { max: 100, ticks: { callback: val => val + '%' } } }
    }
  });

  function cumulatief(arr){
    let res=[];
    arr.reduce((acc,val,i) => res[i] = acc + val, 0);
    return res;
  }

  const cumulJaar1 = cumulatief(huidigNettoData);
  const cumulJaar2 = cumulatief(optimaalNettoData);

  cumChart = new Chart(document.getElementById('cumChart').getContext('2d'),{
    type: 'line',
    data:{
      labels: maanden,
      datasets:[
        {label:'Cumulatief netto huidig', data: cumulJaar1, borderColor:'rgba(33,128,141,0.9)', backgroundColor:'rgba(33,128,141,0.1)',fill:true,tension:0.2},
        {label:'Cumulatief netto geoptimaliseerd', data: cumulJaar2, borderColor:'rgba(230,129,97,0.9)', backgroundColor:'rgba(230,129,97,0.15)', fill:true,tension:0.2}
      ]
    },
    options:{
      responsive:true,
      plugins:{legend:{position:'top'}}
    }
  });
}

document.querySelectorAll('input[type=number]').forEach(input => input.addEventListener('input', bereken));
vakantiegeldInput.addEventListener('input', bereken);
window.onload = bereken;
</script>

<div class="footer">&copy; 2025 Accountant DGA Optimalisatie Dashboard</div>
</body>
</html>
